<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title will be set by script.js -->
    <title>Constitution Explorer</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background: #f7f3e9;
            color: #333;
        }

        .header {
            background-color: #1a3a6e;
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .profile-icon {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 24px;
            color: white;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 10px;
            border-radius: 5px;
            margin: 15px auto;
            width: 80%;
        }

        .progress {
            background: #4CAF50;
            height: 10px;
            border-radius: 5px;
            width: 0%; /* Updated by script */
            transition: width 0.5s ease-in-out;
        }

        .container {
            width: 90%;
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .amendment-card {
            border-left: 5px solid #1a3a6e;
            padding-left: 15px;
            margin-bottom: 20px;
        }

        .full-text {
            font-style: italic;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            border-left: 3px solid #ddd;
            margin-top: 10px; /* Added margin */
        }

        .infographic {
            background: #f0f8ff;
            padding: 15px;
            text-align: center;
            margin: 20px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }

        .icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 18%;
            min-width: 80px; /* Ensure minimum width */
            margin-bottom: 10px; /* Add spacing when wrapped */
        }
        .icon i {
            font-size: 40px;
            margin-bottom: 8px;
        }

        .fun-fact {
            background: #fffde7;
            border-left: 3px solid #ffd600;
            padding: 10px 15px;
            margin: 15px 0;
            position: relative;
        }

        .fun-fact:before {
            content: "Did you know?";
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .quiz-section, .scenario, #reflection-section { /* Grouped similar sections */
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        .scenario { background: #e3f2fd; }
        #reflection-section { background: #f3e5f5; } /* Different background for reflection */


        .btn {
            background: #1a3a6e;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: background-color 0.2s;
        }

        .btn:hover:not(:disabled) { /* Don't change hover style if disabled */
            background: #2c5eaa;
        }
        .btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .quiz-question {
            margin-bottom: 15px;
        }

        .quiz-options label {
            display: block;
            margin: 10px 0;
            padding: 10px;
            background: #f1f1f1;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .quiz-options label:hover {
            background: #e0e0e0;
        }

        .xp-badge {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #ff9800;
            color: white;
            padding: 10px 15px;
            border-radius: 50px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000; /* Ensure it's above other content */
        }

        .navigate {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .key-point {
            cursor: pointer;
            color: #2c5eaa;
            text-decoration: underline;
            font-weight: bold;
        }

        .info-display {
            background: #f8f9fa;
            border-left: 3px solid #2c5eaa;
            padding: 15px;
            margin-top: 10px;
            border-radius: 5px;
            display: none; /* Initially hidden */
        }

        .quiz-results, .scenario-feedback { /* Grouped feedback sections */
            border-left: 3px solid #4CAF50; /* Default success color */
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
            display: none; /* Initially hidden */
        }
        .quiz-results { background: #e8f5e9; }
        .scenario-feedback { background: #e3f2fd; border-left-color: #1a76d2; }


        .retry-message {
            position: fixed;
            bottom: 70px; /* Position above XP badge */
            right: 20px;
            background: #ff9800;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            opacity: 0; /* Start hidden for animation */
            animation: fadeIn 0.5s forwards, fadeOut 0.5s 4.5s forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(10px); }
        }
    </style>
</head>
<body data-amendment="1"> <!-- Specify which amendment this page is for -->
    <div class="header">
        <h1>Constitution Explorer</h1>
        <i class="fas fa-user profile-icon" aria-hidden="true"></i>
        <div class="progress-bar">
            <div class="progress"></div>
        </div>
        <div id="level-display">Level 1 • 0 XP</div> <!-- Updated by script -->
    </div>

    <div class="container">
        <h2 id="amendment-title">Loading Amendment...</h2> <!-- Placeholder -->

        <div class="amendment-card">
            <!-- Content will be dynamically populated by script.js based on available data -->
        </div>

        <!-- Quiz Section -->
        <div class="quiz-section" id="quiz-section" style="display: none;"> <!-- Initially hidden -->
            <h3 id="quiz-title">Checkpoint Quiz</h3>
            <div id="quiz-questions">
                <!-- Questions populated by script -->
            </div>
            <button class="btn" onclick="checkQuiz()">Submit Answers</button>
            <div id="quiz-results" class="quiz-results"></div> <!-- Feedback area -->
        </div>

        <!-- Scenario Section -->
        <div class="scenario" id="scenario-section" style="display: none;"> <!-- Initially hidden -->
            <h3 id="scenario-title">Scenario Challenge</h3>
            <p id="scenario-question"></p> <!-- Populated by script -->
            <div id="scenario-options" style="margin: 20px 0; padding: 15px; background: #f1f1f1; border-radius: 5px; text-align: center;">
                <!-- Options populated by script -->
            </div>
             <div id="scenario-feedback" class="scenario-feedback"></div> <!-- Feedback area -->
        </div>

        <!-- Reflection Section -->
        <div id="reflection-section" style="display: none;"> <!-- Initially hidden -->
            <h3 id="reflection-title">Reflection Prompt:</h3>
            <p id="reflection-prompt"></p> <!-- Populated by script -->
            <textarea id="reflection-text" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd; height: 100px; box-sizing: border-box;"></textarea>
            <br>
            <button class="btn" style="margin-top: 10px;" onclick="addXP(10, 'reflection-submission')">Submit Reflection</button>
        </div>

        <!-- Navigation -->
        <div class="navigate">
            <button class="btn" id="prev-button">« Previous Module</button> <!-- Populated by script -->
            <button class="btn" id="next-button" onclick="completeModule()">Next Module »</button> <!-- Populated by script -->
        </div>
    </div>

    <div class="xp-badge">
        XP: 0 <!-- Updated by script -->
    </div>

    <!-- Scripts -->
    <script src="amendment_data.js"></script>
    <script src="script.js"></script>
</body>
</html>
